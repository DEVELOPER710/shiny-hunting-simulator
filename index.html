<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shiny Hunting Simulator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0f1220;
  color:#eee;
  font-family:Arial, sans-serif;
  text-align:center;
  padding:20px;
}

input, select, button {
  padding:8px;
  margin:6px;
  font-size:16px;
}

button {
  background:#4cafef;
  border:none;
  border-radius:6px;
  font-weight:bold;
}

.encounters {
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:16px;
  margin-top:20px;
}

.poke {
  background:#1b1f3a;
  padding:10px;
  border-radius:10px;
  width:120px;
}

.poke img {
  width:96px;
  image-rendering:pixelated;
}

.sparkle {
  animation:sparkle 1s infinite alternate;
  filter:drop-shadow(0 0 6px gold);
}

@keyframes sparkle {
  from {transform:scale(1);}
  to {transform:scale(1.1);}
}

.shiny { color:gold; font-weight:bold; }

.counter { margin-top:15px; font-size:18px; }

.history {
  margin-top:30px;
  background:#14172c;
  padding:15px;
  border-radius:10px;
}
</style>
</head>

<body>

<h1>✨ Shiny Hunting Simulator ✨</h1>
<div style="opacity:0.8;">By DEVELOPER710</div>
<br><br>

<input id="nameInput" placeholder="Enter Pokémon name">
<select id="batch">
  <option value="1">1 encounter</option>
  <option value="2">2 encounters</option>
  <option value="3">3 encounters</option>
  <option value="5">5 encounters</option>
</select>
<br>
<button onclick="start()">Start</button>
<button onclick="next()">Next</button>

<div class="counter">
Encounters since last shiny: <span id="counter">0</span><br>
Lifetime encounters: <span id="lifetime">0</span>
</div>

<div class="encounters" id="encounters"></div>

<div class="history">
<h3>✨ Shiny History ✨</h3>
<ul id="shinyLog"></ul>
</div>

<script>
const odds = 30000;
let currentName = null;

let counter = Number(localStorage.getItem("counter")) || 0;
let lifetime = Number(localStorage.getItem("lifetime")) || 0;
let shinyLog = JSON.parse(localStorage.getItem("shinyLog")) || [];

document.getElementById("counter").textContent = counter;
document.getElementById("lifetime").textContent = lifetime;

const shinyUl = document.getElementById("shinyLog");
shinyLog.forEach(e => {
  const li = document.createElement("li");
  li.textContent = e;
  shinyUl.appendChild(li);
});

function sprite(name, shiny=false) {
  return shiny
    ? `https://play.pokemonshowdown.com/sprites/xyani-shiny/${name}.gif`
    : `https://play.pokemonshowdown.com/sprites/xyani/${name}.gif`;
}

function start() {
  const n = document.getElementById("nameInput").value.trim().toLowerCase();
  if (!n) return alert("Enter a Pokémon name");
  currentName = n;
  run();
}

function next() {
  if (!currentName) return alert("Start a hunt first");
  run();
}

function run() {
  const batch = Number(document.getElementById("batch").value);
  const box = document.getElementById("encounters");
  box.innerHTML = "";

  for (let i=0;i<batch;i++) {
    counter++;
    lifetime++;

    const shiny = Math.floor(Math.random()*odds)===0;

    const d = document.createElement("div");
    d.className="poke";

    const img = document.createElement("img");
    img.src = sprite(currentName, shiny);
    if (shiny) img.classList.add("sparkle");

    const label = document.createElement("div");
    label.textContent = shiny
      ? `✨ Shiny ${cap(currentName)}`
      : cap(currentName);

    if (shiny) label.classList.add("shiny");

    d.appendChild(img);
    d.appendChild(label);
    box.appendChild(d);

    if (shiny) {
      const entry = `Shiny ${cap(currentName)} — ${counter} encounters`;
      shinyLog.push(entry);
      localStorage.setItem("shinyLog", JSON.stringify(shinyLog));

      const li = document.createElement("li");
      li.textContent = entry;
      shinyUl.appendChild(li);

      counter = 0;
    }
  }

  localStorage.setItem("counter", counter);
  localStorage.setItem("lifetime", lifetime);
  document.getElementById("counter").textContent = counter;
  document.getElementById("lifetime").textContent = lifetime;
}

function cap(s){return s[0].toUpperCase()+s.slice(1);}
</script>

</body>
</html>
